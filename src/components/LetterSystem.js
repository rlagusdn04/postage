import React, { useEffect, useState } from "react";
import { signOut } from "firebase/auth";
import { doc, setDoc, getDocs, collection, serverTimestamp, updateDoc, getDoc, query, orderBy, limit, where } from "firebase/firestore";
import { auth, db } from "../firebase";
import LetterInbox from "./LetterInbox";
import LetterCompose from "./LetterCompose";
import DeveloperPanel from "./DeveloperPanel"; // DeveloperPanel import
import "./LetterSystem.css";

// ìºë¦­í„°ë³„ ë‹µì¥ ì£¼ê¸° (ë°€ë¦¬ì´ˆ)
const CHARACTER_REPLY_SCHEDULES = {
  danpoong: 0,        // ë‹µì¥ ì—†ìŒ (ê¸°ì¡´: null)
  chet: 0,            // 168ì‹œê°„ (1ì£¼ì¼) â†’ 0
  honga: 0,           // 24ì‹œê°„ (1ì¼) â†’ 0
  sangsoon: 0,        // 3ì¼ â†’ 0
  hyunwoo: 0,         // 1ì¼ â†’ 0
  coffee: 0,          // 1ì¼ â†’ 0
  cloud: 0            // ì¦‰ì‹œ
};

// ìºë¦­í„°ë³„ ë©”ì‹œì§€ í…œí”Œë¦¿
const CHARACTER_MESSAGES = {
  danpoong: [
    (nickname) => `from ğŸ\n\nì•ˆë…•, ${nickname}.\nê°€ì„ì´ ì˜¤ëŠ” ì†Œë¦¬ê°€ ë“¤ë ¤.\në‚˜ë­‡ìë“¤ì´ ë°”ëŒì— ì¶¤ì„ ì¶”ê³  ìˆì–´.\n\nì˜¤ëŠ˜ì€ ì–´ë–¤ í•˜ë£¨ë¥¼ ë³´ë‚´ê³  ìˆë‹ˆ?`,

    (nickname) => `from ğŸ\n\nTo. ${nickname}\n\në„¤ ì´ì•¼ê¸°ë¥¼ ë“¤ìœ¼ë‹ˆ ë§ˆìŒì´ ë”°ëœ»í•´ì ¸.\nê°€ì„ì€ í•­ìƒ ìƒˆë¡œìš´ ì‹œì‘ì„ ì•Œë¦¬ëŠ” ê³„ì ˆì´ì•¼.\n\në‚˜ë­‡ìë“¤ì´ ë–¨ì–´ì§€ë©´ì„œë„ ì•„ë¦„ë‹¤ìš´ ìƒ‰ì„ ë‚¨ê¸°ëŠ” ê²ƒì²˜ëŸ¼,\nìš°ë¦¬ì˜ ë§Œë‚¨ë„ íŠ¹ë³„í•œ ì¶”ì–µì´ ë  ê±°ì•¼.\n\nê³ ë§ˆì›Œ, ${nickname}.`,

    (nickname) => `from ğŸ\n\nTo. ${nickname}\n\nê°€ì„ì´ ì§€ë‚˜ê°€ê³  ìˆì–´.\ní•˜ì§€ë§Œ ìš°ë¦¬ê°€ ë‚˜ëˆ„ì—ˆë˜ ì´ì•¼ê¸°ë“¤ì€ ë‚¨ì•„ìˆì„ ê±°ì•¼.\n\nì–¸ì  ê°€ ë‹¤ì‹œ ë§Œë‚  ìˆ˜ ìˆì„ê¹Œ?\nê·¸ë•Œê¹Œì§€ ê±´ê°•í•˜ê²Œ ì§€ë‚´ê¸¸ ë°”ë¼.\n\nì•ˆë…•, ${nickname}.`
  ],
  
  chet: [
    (nickname) => `from ğŸ­\n\në‹¹ì‹ ì´ ì˜ ìˆì—ˆëŠ”ì§€, ì–´ë–¤ í’ê²½ ì†ì—ì„œ ì›ƒê³  ìˆì—ˆëŠ”ì§€ ëŠ˜ ê¶ê¸ˆí•´ìš”.\në§Œì•½ ê·¸ ì†Œì‹ì„ ë“£ì§€ ëª»í•˜ëŠ” ë‚ ì´ ì˜¨ë‹¤ë©´, ê·¸ê±´ ë‹¹ì‹ ì´ ì•„ë‹ˆë¼ ì €ì˜ ë‚˜íƒœí•¨ì´ë‚˜ ë¶ˆì•ˆí•¨ ë•Œë¬¸ì¼ ê±°ì˜ˆìš”.\nê·¸ëŸ¬ë‹ˆ ì œê°€ ì¹¨ë¬µí•  ë•ŒëŠ”, ëŠ˜ ë‹¹ì‹ ì„ ë– ì˜¬ë¦¬ê³  ìˆë‹¤ëŠ” ì‘ì€ ì¦í‘œë¡œ ë°›ì•„ ì£¼ê¸¸ ë°”ë¼ìš”.\n\nì´ í¸ì§€ê°€ ë‹¿ì„ ë•Œì¯¤, ë‹¹ì‹ ë„ ì €ë¥¼ ë– ì˜¬ë¦¬ë©° ê°€ë³ê²Œ ë¯¸ì†Œ ì§€ì–´ ì£¼ë©´ ì¢‹ê² ì–´ìš”.\nìš°ë¦¬ ì‚¬ì´ì˜ ì‹œê°„ì€ í¸ì§€ì— ì‹¤ë¦° ë¬¸ì¥ì²˜ëŸ¼, ê°€ë³ê³ ë„ ê¹Šê²Œ íë¥´ë‹ˆê¹Œìš”.\n\nëŠ˜ ë‹¹ì‹ ì„ ìƒê°í•˜ë©°,\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì˜¤ëŠ˜, ê³„ì ˆì´ ë°”ë€ŒëŠ” ëŠë‚Œì„ ë°›ì•˜ì–´ìš”.\në‹¹ì‹ ì´ ì¢‹ì•„í•˜ë˜ ê³„ì ˆì´ ë‹¤ê°€ì˜¤ê³  ìˆë”ë¼ê³ ìš”.\nê·¸ ê³„ì ˆ ì† ë‹¹ì‹ ì€ ì–´ë–¤ ëª¨ìŠµì¸ê°€ìš”?\në‚˜ëŠ” ê·¸ì € ë©€ë¦¬ì„œë¼ë„, ë‹¹ì‹ ì˜ ê³„ì ˆì— ì¡°ìš©íˆ ë‹¿ê³  ì‹¶ì€ ë§ˆìŒì´ì—ìš”.\ní˜¹ì‹œ ê·¸ ê³„ì ˆ ì†ì—ì„œ ì €ë¥¼ ë– ì˜¬ë¦°ë‹¤ë©´, ë”í•  ë‚˜ìœ„ì—†ì´ ê¸°ì  ê²ƒ ê°™ì•„ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì–´ì©Œë©´ ì´ í¸ì§€ëŠ” ë‹¹ì‹ ì´ ì ë“  ì‚¬ì´ì— ë‹¿ê² ì£ .\nê·¸ëŸ¬ë©´ ë‚´ì¼ì˜ ë‹¹ì‹ ì€ ì´ ê¸€ì„ í•œì°¸ ë’¤ì—ë‚˜ ì½ê²Œ ë ì§€ë„ ëª¨ë¥´ê² ì–´ìš”. ë‹¹ì‹ ì˜ í•˜ë£¨ê°€ ë¬´ì‚¬í•˜ê¸°ë¥¼, ì›ƒëŠ” ì¼ì´ ì¡°ê¸ˆì´ë¼ë„ ë” ë§ê¸°ë¥¼.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì¢‹ì€ ë°¤ì´ì—ìš”. ì–´ë–»ê²Œ ë³´ë‚´ê³  ê³„ì‹ ê°€ìš”.\ní•œê°€ì§€ ì—¬ì­¤ë³´ê³  ì‹¶ì€ê²Œ ìˆì–´ìš”.\ní˜¹ì‹œ ì‚¬ë‘ì— ë¹ ì ¸ë³´ì‹  ì ì´ ìˆìœ¼ì‹ ê°€ìš”?\n\ní•­ìƒ ì €ì—ê²Œ ì‚¬ë‘ì´ë€ ë‹¨ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë¶€ë‹´ìŠ¤ëŸ¬ì› ì–´ìš”.\nëª‡ ë²ˆì€ í•œ ë°œì§ ë‹¤ê°€ê°€ê¸°ê°€ ë¬´ì„œì›Œí•˜ë‹¤ ê²¨ìš° ì¤€ë¹„ê°€ ë˜ë©´ ëª¨ë‘ ì¼ì–´ë‚˜ì„œ ë– ë‚˜ë²„ë ¸ì–´ìš”. ì‹¤ë§í–ˆë˜ê±°ê² ì£ . ë˜ ë‹¤ì‹œ ì œ ë…ë‹¨ìœ¼ë¡œ ëˆ„êµ°ê°€ë¥¼ ìŠ¬í”„ê²Œí•˜ê³ ì‹¶ì§„ì•Šë„¤ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nëŠ˜ ê·¸ë¬ë“¯ ê·¸ì € ìŠ¤ì¹˜ëŠ” ê°ì •ì´ë ¤ë‹ˆ í–ˆëŠ”ë°, í•­ìƒ ê·¸ë ‡ê²Œ ë†“ì³ì˜¨ê±¸ê¹Œìš”. ì´ë²ˆì—” í™•ì‹ í•´ë„ ë˜ëŠ”ê±´ì§€ ëª¨ë¥´ê² ì–´ìš”.\n\nì‚¬ì‹¤ ì €ëŠ” ì‚¬ë‘ì´ë¼ëŠ” ë§ì„ ê°€ë³ê²Œ ì“°ì§€ ëª»í•´ìš”. ì•„ë‹ˆ, ìµìˆ™í•˜ì§€ ì•Šì•˜ì–´ìš”. ëŠ˜ ì–´ìƒ‰í–ˆê³ , ê·¸ë§Œí¼ ì¡°ì‹¬ìŠ¤ëŸ¬ì› ì£ .\n\nì „ ì›ë˜ ê°ì •ì„ ì•Œì•„ì±„ëŠ”ê²Œ ë‘”í•œ í¸ì´ì—ìš”.\nê¸´ ì‹œê°„ ë™ì•ˆ ë‹¤ê°€ì™€ì¤€ ê²ƒì´ ê³ ë§™ê³ , ì´ ê¸€ì„ ì“°ëŠ” ì§€ê¸ˆë„ ì–´ì©ì§€ ì¡°ê¸ˆì€ ì„¤ë ˆë„¤ìš”.\n\nëˆ„êµ°ì§„ ë§ì”€ ëª»ë“œë ¤ìš”.\nì•„ë§ˆ ì œ ë¨¸ë¦¿ì†ì„ ë›°ì–´ë‹¤ë‹ˆëŠë¼ ë°”ì  êº¼ì—ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\në°˜ê°€ì›Œìš”, ì˜¤ëœë§Œì´ì£ ?\nê½¤ ì˜¤ë«ë™ì•ˆ í¸ì§€ë¥¼ ì“°ì§€ëª»í•œ ì´ìœ ê°€ ìˆì–´ìš”.\n\ní•œë™ì•ˆ ìƒê°ì´ ë§ì•„ì ¸ ìˆì—ˆì–´ìš”.\nì›ë˜ ì´ëŸ° ì‹ì´ì£ .\n\nì²˜ìŒì—” ì§•í¬ìŠ¤ë¥¼ ê¹° ìˆ˜ ìˆì§€ì•Šì„ê¹Œ í–ˆì–´ìš”.\nì €ë²ˆ í¸ì§€ë¥¼ ê¸°ì–µí•˜ë‚˜ìš”? ê¸°ì°¨ë¥¼ ë†“ì¹œ ì‹œê°„ë“¤ë„, ì—´ë³‘ì— ì•“ì•„ëˆ„ìš´ ì‹œê°„ì—ë„ ì˜¨í†µ ë‹¤ë¥¸ ìƒê°ë¿ì´ì˜€ì–´ìš”. ì‚¬ë‘ì´ ì´ëŸ° ì ˆë§ì„ ëë‚¼ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œí•˜ê³ ìš”.\n\ní•­ìƒ ì €ì—ê²Œ ë¯¸ì•ˆí•˜ë‹¤ê³ , ê³ ë§™ë‹¤ê³  í•´ì£¼ì—ˆì§€ë§Œ\nì œê°€ ë…¸ë ¥í•˜ì§€ì•Šì€ ì‹œê°„ì´ ë„ˆë¬´ ê¸¸ì—ˆë˜ ê±¸ê¹Œìš”.\n\në‹¨ í•œ ì¤„ì˜ â€œì•ˆë…•â€ë§Œ ë‚¨ê¸´ ì±„, í¸ì§€ì§€ë„ ì—†ì—ˆì–´ìš”.\n\nì´ì   ë” ì´ìƒ ì €ë¥¼ ì†ì¼ ìˆ˜ë„ ì—†ë„¤ìš”. ì €ë„ ì•Œì•„ìš”, ì œê°€ ë¬¸ì œë¼ëŠ” ê±¸. íƒ“í•  ì—¬ìœ ë¥¼ ì ê¹ ì£¼ì„¸ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì œ í›„íšŒë“¤ì€ ë³´ë‚´ì§€ ë§ì•˜ì–´ì•¼í•  í¸ì§€ê°™ì•„ìš”. ê·¸ì € ë‚´ ë¨¸ë¦¿ì† ìƒê°ì„ ë²—ì–´ë‚  ë°©ë²•ì´ í•„ìš”í•œë° ì‰½ì§€ì•Šë„¤ìš”. ê·¸ ì´ì—ê²Œ ë§í•˜ì§€ ì•Šì•˜ë˜ê±´ ì œê²Œë„ ì•„ì§ ë§í•˜ì§€ì•Šì•˜ì–´ìš”.\n\nê²°êµ­ ë¯¸ë¦¬ ì¤€ë¹„í•œ ë§ë„, ë§ˆì§€ë§‰ ì¸ì‚¬ë„, ì „í•˜ì§€ëª»í–ˆë„¤ìš”. ì´ì œì™€ì„œ ì „í•œë“¤ ë­ê°€ ë‹¬ë¼ì§ˆê¹Œìš”?\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì˜¨ì¢…ì¼ ìƒë…ì— ì ê²¨ì„  í˜¼ìì„œ ì •ë¦¬í•  ì‹œê°„ì„ ê°€ì¡Œì–´ìš”.\nê·¸ ë™ì•ˆ ìƒìƒì˜ ë‚˜ë˜ë¥¼ í¼ì¹˜ëŠë¼ ë°”ë¹´ê±°ë“ ìš”.\nì´ì   ê¿ˆì—ì„œ ê¹¨ì–´ë‚˜ì•¼í• ê¹Œë´ìš”, ì‚¬ì‹¤ í›„íšŒë¡œ ë‚¨ì€ ì¼ë“¤ì´ ë§ì§€ë§Œ "ë‹¤ ìŠì—ˆì–´"ë€ ë§ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ”ê²Œ ì‰½ì–ì•„ìš”.\n\nì‰½ê²Œ ì‰½ê²Œ ê°€ë„ ìƒê´€ì—†ëŠ”ê±° ì•„ë‹Œê°€ìš”? ì œê²Œ ì¹´ë“œê°€ ì£¼ì–´ì¡Œì—ˆì§€ë§Œ, ë‚¨ì˜ ìš´ëª…ì„ ê²°ì •í•˜ê³  ì‹¶ì§€ì•Šì•„ ë®ì–´ë²„ë ¸ì–´ìš”.\n\nê·¸ ë• ë§ì€ ë§ì„ ë‹¬ê³ ì‚´ì•˜ëŠ”ë° ê·¸ì¤‘ì— ì ˆë°˜ì€ ë¬´ìŠ¨ì†Œë¦¬ë¥¼ í•˜ëŠ”ì§€ë„ ëª¨ë¥¸ì±„ë¬´ì‘ì • ë‚´ë±‰ì—ˆë˜ ê²ƒ ê°™ì•„ìš”.\n\nì ì–´ë„ ìµœì•…ìœ¼ë¡œ í˜ëŸ¬ê°€ì§„ ì•Šì•˜ìœ¼ë‹ˆê¹Œ ë‚˜ì˜ì§„ì•Šë„¤ìš”. ì´ê²Œ ì›ë˜ ì œ ìŠ¤íƒ€ì¼ì´ì—ìš”. ì ˆ ì˜ì•„ëŠ” ì‚¬ëŒë“¤ì—ê² ìƒˆì‚¼ ë†€ë¼ìš´ë§Œí•œ ì¼ë„ ì•„ë‹ê±¸ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ­\n\nì±…ì„ ì½ë˜ ì¤‘ ì¸ìƒ ê¹Šì€ ê¸€ì„ ì½ì—ˆì–´ìš”. "ì–´ì œë³´ë‹¤ ì˜¤ëŠ˜ ì‚¬ë‘í•˜ë ¤ ì• ì“°ê³ , ì˜¤ëŠ˜ë³´ë‹¤ ë‚´ì¼ ë” ì‚¬ë‘í•˜ë ¤ê³  ë§ˆìŒë¨¹ìœ¼ì‹œì˜¤." ë‹¹ì‹ ì—ê²Œë„ ê·¸ ì§„ì‹¬ì´ ì•„ê¹ì§€ì•Šì„ë§Œí•œ ì‚¬ëŒì´ ì°¾ì•„ì˜¤ë©´ ì¢‹ê² ë„¤ìš”.\n\nTo. ${nickname}`
  ],
  
  honga: [
    (nickname) => `from ğŸ¤­\n\nì €ëŠ” í™ì•„ë¼ê³  í•´ìš”. ë‚¯ì„  ì‚¬ì´ì§€ë§Œ ì´ í¸ì§€ê°€ ë‹¹ì‹ ê»˜ ë‹¿ì•˜ë‹¤ë©´, ì •ë§ ê¸°ì  ê²ƒ ê°™ì•„ìš”.\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ¤­\n\nì•ˆë…•í•˜ì„¸ìš”,\n\në‹¹ì‹ ì˜ ë”°ìŠ¤í•œ ë‹µì¥ì„ ë°›ì•„ ì œ í•˜ë£¨ê°€ í•œì¸µ ë” íŠ¹ë³„í•´ì¡Œì–´ìš”. ê³ ë§ˆì›Œìš”.\n\nìš”ì¦˜ì€ ì–´ë–¤ ì¼ì´ ë‹¹ì‹ ì„ ì›ƒìŒ ì§“ê²Œ ë§Œë“¤ì–´ì£¼ì—ˆë‚˜ìš”?\ní˜¹ì€ ë§ˆìŒì„ ì‚¬ë¡œì¡ì€ ì±…ì´ë‚˜ ìŒì•…, ìƒˆë¡œìš´ ì·¨ë¯¸ê°€ ìˆë‹¤ë©´ ë‚˜ëˆ ì£¼ì‹¤ ìˆ˜ ìˆì„ê¹Œìš”? ì§§ì€ ê¸€ì´ë¼ë„ ì¢‹ìœ¼ë‹ˆ ë“¤ë ¤ì£¼ì„¸ìš”.\n\nê·¸ë¦¬ê³  í˜¹ì‹œ íŠ¹ë³„íˆ ë‚˜ëˆ„ê³  ì‹¶ì€ ì£¼ì œê°€ ìˆë‹¤ë©´ ì–¸ì œë“  í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”.\nì €ë„ ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ì— ê·€ ê¸°ìš¸ì´ë©°, ë‹¤ìŒ í¸ì§€ì—ì„œëŠ” ê·¸ ì´ì•¼ê¸°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¡°ê¸ˆ ë” ê¹Šì´ ëŒ€í™” ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.\n\nì´ì œ ë§‰ ì‹œì‘ëœ ì¸ì—°ì´ì§€ë§Œ, ë¶€ë”” ì´ í¸ì§€ê°€ ë‹¹ì‹ ì˜ í•˜ë£¨ì— ì‘ì€ ì›ƒìŒì„ ì „í•´ì¤„ ìˆ˜ ìˆê¸¸ ë°”ë¼ìš”.\n\në”°ëœ»í•œ ì•ˆë¶€ì™€ í•¨ê»˜,\n\nTo. ${nickname}`,
    (nickname) => `from ğŸ¤­\n\nì˜¤ëŠ˜ì€ ì¡°ê¸ˆ í‰ì†Œì™€ ë‹¬ëì–´ìš”. ì–´ì©ì§€ ë§ˆìŒì´ ê°€ë²¼ìš´ ë“¯í•˜ë©´ì„œë„, ë¬˜í•˜ê²Œ ì„¤ë ˆëŠ” ê¸°ë¶„ì´ì—ˆê±°ë“ ìš”.\nê°€ë” ë‚˜ê°ˆ ë•Œ ê¸°ë¶„ì¢‹ì€ ìš°ì—°ì„ ê¸°ëŒ€í•˜ë©´ì„œ ë‚˜ê°€ëŠ” ë‚ ë“¤ ìˆì§€ì•Šë‚˜ìš”? ê·¸ë˜ì„œì¸ì§€ ìš°ì—°íˆ ë§ˆì£¼ì¹œ ëˆ„êµ°ê°€ë¥¼ ê¸°ì–µí•˜ëŠ” ê²ƒë„ ê·¸ëŸ° ê¸°ë¶„ íƒ“ì¸ì§€ í—·ê°ˆë ¤ìš”.\nì •ë§ ì ê¹ ìŠ¤ì³¤ë˜ ìˆœê°„ì´ì—ˆëŠ”ë°, ê·¸ ìƒê°ì„ í•˜ë‹¤ ë³´ë‹ˆ ì™ ì§€ ë‹¨ë°œë¡œ ë°”ê¿”ë³¼ê¹Œí•˜ëŠ” ì‹¶ì€ ìƒê°ì´ ë“¤ì—ˆì–´ìš”.\n\në°”ë³´ ê°™ì€ ìƒê°ì¸ê±´ ì €ë„ ì•Œì•„ìš”, ë¬¼ë¡  ë§ í•œë§ˆë”” ë‚˜ëˆ ë³¸ ì  ì—†ê³  ë‹¤ì‹œ ë§Œë‚  ì¼ë„ ì—†ê² ì£ \nê·¸ë˜ë„ ë¹„ì›ƒì§€ ë§ì•„ì£¼ì„¸ìš”. ì´ëŸ° ì„¤ë ˜ì„ ë‹¹ì‹ ê³¼ë„ ë‚˜ëˆ„ê³  ì‹¶ì—ˆì–´ìš”.\ní˜¹ì‹œ ë‹¹ì‹ ë„ ìµœê·¼ ì¼ìƒì—ì„œ ê·¸ëŸ° ì‘ì§€ë§Œ íŠ¹ë³„í•œ ìˆœê°„ì„ ëŠë¼ì‹  ì  ìˆë‚˜ìš”?\n\në‹¤ìŒ í¸ì§€ì—ëŠ” ê·¸ëŸ° ì´ì•¼ê¸°, í˜¹ì€ ë‹¹ì‹ ì˜ í•˜ë£¨ ì† ì‘ì€ ê¸°ì¨ì„ ë“£ê³ ì‹¶ì–´ìš”.\n ë‹¹ì‹ ì—ê²Œë„ ì„¤ë ˜ì´ ì°¾ì•„ì˜¤ê¸¸ ë°”ë¼ë©° \n\nTo. ${nickname}`
  ],
  sangsoon: [
    (nickname) => `ë°˜ê°‘ê³ ì¶”.\nì§€ë‚œ ìƒì›ì ˆ ì—°íšŒ ìë¦¬ì—ì„œ ë¶„ì— ë„˜ëŠ” ìŒë³µê³¼ ì¢Œì„ê°’ìœ¼ë¡œ ì£¼ë¨¸ë‹ˆê°€ ì†ì ˆì—†ì´ ë¹„ì—ˆì‚¬ì˜¨ë°,\nì‹¤ë¡œ ì… ìŒ€ í•œ í†¨ ë‹´ê¸° ì–´ë ¤ìš´ í˜•í¸ì´ ë˜ì–´, ë¶€ë“ë¶ˆ ì¥ë¬¸ì„ ë‚¨ê¸°ê²Œ ë˜ì—ˆì†Œ.\n\nëˆì„ ë²Œ ë°©ë²• ì–´ë”” ì—†ëŠ”ì§€ ìˆ˜ì†Œë¬¸í•˜ì—¬ êµ¬í•˜ëŠ” ë°”ì˜¤.\nì‘ì€ ì¼ë„ ë§ˆë‹¤í•˜ì§€ ì•Šê² ì‚¬ì˜¤ë‹ˆ, ì€í˜œë¥¼ ë² í’€ì–´ ì£¼ì‹œê¸¸ ê°„ì ˆíˆ ë°”ë¼ë‚˜ì´ë‹¤.\në‹¹ì¥ ì†Œì¸ì˜ ì‘ì€ ì–´ë ¤ì›€ì„ í—¤ì•„ë ¤ í›„ì— í° ì¼ì„ í•¨ê»˜ ë„ëª¨í•  ìˆ˜ ìˆë‹¤ë©´ ì–¼ë§ˆë‚˜ ì¢‹ì€ ì¼ì´ê² ì†Œ? \nê·€í•˜ì˜ ì†Œê°œì™€ í•¨ê»˜ ì†ê¸¸ì´ ë‹¿ëŠ” ê³³ì„ ëª¨ìƒ‰í•´ì£¼ì‹ ë‹¤ë©´ ê·¸ ì€í˜œë¥¼ ìŠì§€ ì•Šê² ì†Œ.\n\në‹¹ë¬¸ ì™¸ë¬¸ì œì ìƒìˆœ`,
    (nickname) => `ë°˜ê°‘ê³ ì¶”. í¸ì§€ëŠ” ì˜ë°›ì•˜ì†Œ. í—ˆë‚˜ ì „ë²ˆ í¸ì§€ë¥¼ ë„ìš´ ë’¤, ì´ë‚´ ë¶€ë„ëŸ¬ì›€ì´ ë°€ë ¤ì™€ í¸ì§€ë¥¼ ì±„ ë°›ê¸°ë„ ì „ì— ë©°ì¹ ì´ê³  ë‚´ë©´ì„ ë“¤ì—¬ë‹¤ë³´ì•˜ì†Œ.ë„ì›€ì„ êµ¬í•œë‹¤ëŠ” ê²ƒì´ ë‹¨ì§€ ì†ì„ ë‚´ë¯¸ëŠ” ì¼ì´ ì•„ë‹ˆë¼, ëˆ„êµ°ê°€ì˜ ë§ˆìŒê³¼ ìë¦¬ë¥¼ ë¹Œë¦¬ëŠ” ì¼ì„ì„ ìƒˆì‚¼ ê¹¨ë‹¬ì•˜ê¸° ë•Œë¬¸ì´ì˜¤.\n\nê·¸ë˜ì„œ ìŠ¤ìŠ¤ë¡œ ì›€ì§ì˜€ì†Œ.\në‚´ ë¶€ì¡±í•œ ì†œì”¨ë¡œë‚˜ë§ˆ ìƒë‹¨ì˜ í˜¸ìœ„ ì¼ì„ ë§¡ì•˜ê³ , ë¹„ë¡ ëª‡ ë²ˆ ìœ„ê¸°ë¥¼ ê²ªì—ˆìœ¼ë‚˜ â€” ì†Œìƒì€ ì£½ìŒì— ê°•í•œ ë“¯í•˜ì˜¤. ì§€ê¸ˆê» í•œ ë²ˆë„ ì£½ì–´ë³¸ ì  ì—†ìœ¼ë‹ˆ ë§ì¼ì„¸.\n\nê·¸ëŸ¬ë˜ ì¤‘, ë‚˜ì™€ ê°™ì€ ì²˜ì§€ì˜ ì´ë¥¼ ë§Œë‚¬ì†Œ.\nê²‰ìœ¼ë¡  íƒœì—°í–ˆì§€ë§Œ, í˜•í¸ì€ ë‚˜ë³´ë‹¤ ë” ì–´ë ¤ì›Œ ë³´ì˜€ì†Œ.\ní—ˆë‚˜ ê·¸ ì‚¬ëŒ, ëë‚´ ì‰½ê²Œ ë„ì›€ì„ ì²­í•˜ì§€ ëª»í•˜ë”êµ°.\nê·¸ ëª¨ìŠµì´ ìê¾¸ë§Œ ë§ˆìŒì— ë‚¨ì•˜ì†Œ. ì˜ˆì „ ë‚´ ëª¨ìŠµì´ ë– ì˜¤ë¥´ê¸°ë„ í•˜ë”êµ¬ë ¤.\n\nê·¸ë•Œë¶€í„° í•œ ê°€ì§€ ìƒê°ì´ ë¨¸ë¦¿ì†ì„ ë– ë‚˜ì§ˆ ì•Šë”ì´ë‹¤.\nê·¸ëŒ€ë¼ë©´, ëˆ„êµ°ê°€ê°€ ì–´ë ¤ì›€ì— ì²˜í–ˆëŠ”ë° ì†ì„ ë²Œë¦¬ì§€ ëª»í•œë‹¤ë©´ ë¨¼ì € ë‹¤ê°€ê°€ê² ì†Œ? ê·¸ì—ê²Œë„ ë„ì›€ì„ ì²­í•˜ì§€ ì•ŠëŠ” ì‚¬ì •ì´ ìˆì„ì§€ë„ ëª¨ë¥´ì˜¤.\n\në˜ ë¬¸ë“, ë‚´ê°€ ë‹¤ë¥¸ ì…ì¥ì´ì—ˆë‹¤ë©´ ì–´ë• ì„ê¹Œ, ê·¸ëŸ° ìƒê°ë„ ë“¤ì—ˆì†Œ.\nê³¼ì—° ë‚˜ëŠ” ë‚´ê°€ ì—¬íƒœê» ê²ªì–´ë³´ì§€ ëª»í•œ ëˆ„êµ°ê°€ì˜ ê³¤ê¶ì„, ê²‰ìœ¼ë¡œ íƒœì—°í•œ ë§íˆ¬ì™€ ì›ƒìŒ ì†ì—ì„œë„ ì•Œì•„ë³¼ ìˆ˜ ìˆì—ˆì„ê¹Œ?\në˜, ì•Œì•„ë³´ì•˜ë‹¤ë©´ ê¸°êº¼ì´ ì†ì„ ë‚´ë°€ì—ˆì„ê¹Œ?\n\nê·¸ì € ë§ˆìŒì— ë§´ë„ëŠ” ë¬¼ìŒë“¤ì„ ì´ë ‡ê²Œ ì ì–´ ë³´ë‚´ì˜¤.\ní˜¹ì—¬ ê·¸ëŒ€ì˜ ê³ ê²¬ì„ ë“¤ì„ ìˆ˜ ìˆë‹¤ë©´, ë‚´ê²Œ í° ë„ì›€ì´ ë  ê²ƒì´ì˜¤.\n\në‹¹ë¬¸ ì™¸ë¬¸ì œì ìƒìˆœ`,
  ],
  hyunwoo: [
    (nickname) => `?`
  ],
  coffee: [
    (nickname) => `from â˜•\n\nì•ˆë…•í•˜ì„¸ìš”,ë¬¸ì–´ëŠ” ì‹¬ì¥ì´ ì„¸ ê°œë‚˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤, ì•Œê³  ê³„ì…¨ë‚˜ìš”?\ní•˜ë‚˜ëŠ” ëª¸ ì „ì²´ì— í˜ˆì•¡ì„ ìˆœí™˜ì‹œí‚¤ëŠ” ì²´ì‹¬ì¥ì´ê³ , ë‚˜ë¨¸ì§€ ë‘ ê°œëŠ” ì•„ê°€ë¯¸ ì‹¬ì¥ìœ¼ë¡œ ì•„ê°€ë¯¸ì™€ ë‹¤ë¦¬ì— í˜ˆì•¡ì„ ê³µê¸‰í•œë‹µë‹ˆë‹¤.\nì²´ì‹¬ì¥ì€ í‰ì†Œì—ëŠ” ì—´ì‹¬íˆ ë›°ì§€ë§Œ, ìˆ˜ì˜ì„ í•  ë•ŒëŠ” ë©ˆì¶˜ë‹¤ê³  í•˜ë„¤ìš”. ë•ë¶„ì— ë¬¸ì–´ëŠ” ìˆ˜ì˜í•  ë•Œ ì²´ë ¥ì´ ê¸ˆë°© ë–¨ì–´ì§€ì§€ë§Œ, ê¸°ì–´ ë‹¤ë‹ ë• í›¨ì”¬ ì˜¤ë˜ ì›€ì§ì¼ ìˆ˜ ìˆë‹µë‹ˆë‹¤.  ${nickname}ë‹˜.`,

    (nickname) => `from â˜•\n\nTo. ${nickname}\n\në ˆëª¬ì¦™ì„ ì‚¬ìš©í•˜ë©´ í‰ë²”í•œ ì¢…ì´ì— ì•„ë¬´ ê¸€ìë„ ë³´ì´ì§€ ì•Šê²Œ ì“¸ ìˆ˜ ìˆì–´ìš”.ê¸€ìë¥¼ ì“´ ë’¤ì—” ê²‰ìœ¼ë¡œëŠ” ì•„ë¬´ê²ƒë„ ì—†ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì¢…ì´ë¥¼ ì‚´ì§ ë¶ˆì— ë°ìš°ë©´ ë ˆëª¬ì¦™ì´ íƒ€ë©´ì„œ ê¸€ì”¨ê°€ ê°ˆìƒ‰ìœ¼ë¡œ ë“œëŸ¬ë‚©ë‹ˆë‹¤.\n\nì´ ë°©ë²•ì€ ì˜›ë‚ ì— ë¹„ë°€ìŠ¤ëŸ¬ìš´ ë©”ì‹œì§€ë¥¼ ì „í•  ë•Œ ë§ì´ ì‚¬ìš©ë˜ì—ˆë‹µë‹ˆë‹¤. ì ì—ê²Œ ë“¤í‚¤ì§€ ì•Šê³  ëª°ë˜ ì •ë³´ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆì—ˆì£ .`,

    (nickname) => `from â˜•\n\nTo.${nickname}\n ë°”ë‚˜ë‚˜ëŠ” ì‚¬ì‹¤ â€˜ë² ë¦¬(berry)â€™ì— ì†í•œ ê³¼ì¼ì´ëë‹ˆë‹¤.\në°˜ë©´, ë”¸ê¸°ëŠ” ë†€ëê²Œë„ ë² ë¦¬ê°€ ì•„ë‹ˆì—ìš”!\në”¸ê¸°ëŠ” ì‹ë¬¼í•™ì ìœ¼ë¡œ â€˜ê²‰ì”¨ê³¼â€™ì— ì†í•˜ëŠ” ê³¼ì¼ì´ë¼, ê²‰ì— ì”¨ê°€ ë°•í˜€ ìˆëŠ” í˜•íƒœì£ .\nê·¸ëŸ°ë° ì™œ ë”¸ê¸°ë¥¼ ì˜ì–´ë¡œ â€˜strawberry(ì§š ë² ë¦¬)â€™ë¼ê³  ë¶€ë¥¼ê¹Œìš”?\nì˜›ë‚  ìœ ëŸ½ì—ì„œëŠ” ë”¸ê¸°ë¥¼ ì‹¬ì„ ë•Œ ë•…ì— ë‹¿ì§€ ì•Šë„ë¡ ì§š(straw)ì„ ê¹”ì•„ ë³´í˜¸í–ˆì–´ìš”.\në˜ëŠ” ë”¸ê¸°ì˜ ì¤„ê¸°ê°€ ì§šì²˜ëŸ¼ ê°€ëŠ˜ê³  ê¸¸ì–´ì„œ ê·¸ë ‡ê²Œ ë¶ˆë ¸ë‹¤ëŠ” ì„¤ë„ ìˆë‹µë‹ˆë‹¤.`,

    (nickname) => `from â˜•\n\nTo.${nickname}\n \në©”ëª¨ì¥ì—ì„  F5 í‚¤ë¥¼ ëˆ„ë¥´ë©´ í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ì´ ë°”ë¡œ ì…ë ¥ëœë‹µë‹ˆë‹¤. ê°„ë‹¨í•œ ì¼ì§€ë‚˜ í¸ì§€ë¥¼ ì‘ì„±í•  ë•Œ ë§¤ìš° ìœ ìš©í•˜ì£ .\nì‘ì—…ì„ ë§ˆì³¤ë‹¤ë©´ Ctrl + Së¡œ ì €ì¥í•˜ëŠ” ìŠµê´€ì„ ê¼­ ë“¤ì´ì„¸ìš”.`,

    (nickname) => `from â˜•\n\nTo.${nickname}\n `
  ],
  cloud: [
    (nickname) => `from â˜ï¸\n\në„Œ ë‚˜ë¥¼ ê¸°ì–µí• ê¹Œ?\nê¸€ì„, ìš°ë¦° ì–´ì©Œë©´ ì¹œêµ¬ê°€ ë  ìˆ˜ë„ ìˆì—ˆì„í…ë°. \n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\nì¢‹ì€ ë°¤ì´ì•¼. ë‹µì¥ ê³ ë§ˆì›Œ. ë„ˆì—ê²Œë„ ì¢‹ì€ ë°¤ì´ì˜€ìœ¼ë©´ í•´, ë‚ ì´ ì¢‹ë“  ë‚˜ì˜ë“  ê°„ì—. ì—¬ê¸°ëŠ” ë¹„ê°€ ì˜¤ê±°ë“ . ë‹¤ìŒì—” í•¨ê»˜ ì„œì»¤ìŠ¤ë‚˜ ë³´ëŸ¬ê°€ì. ë§ˆì§€ë§‰ìœ¼ë¡œ í•¨ê»˜ ìš°ìŠ¤ê½ìŠ¤ëŸ¬ìš´ ê±¸ ë³¸ì§€ê°€ ì–¸ì œì¸ì§€ ê¸°ì–µë„ ì•ˆë‚˜ë„¤.\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\nì¡°ê¸ˆ ì´ìƒí•˜ê²Œ ë“¤ë¦´ì§€ ëª¨ë¥´ì§€ë§Œ ë‚œ ë„ˆë¥¼ ì†Œì¤‘íˆ ìƒê°í•´.\n ì²˜ìŒ í¸ì§€ë¥¼ ì“´ ê²ƒë„ ê·¸ ì´ìœ ì˜€ì–´. \nìš°ë¦¬ê°€ ë§ì€ ì‹œê°„ì„ ë³´ë‚´ì§„ì•Šì•˜ì§€ë§Œ ê·¸ëŸ° ì¢…ë¥˜ì˜ ê²ƒì€ ë‚˜ì—ê²Œ í¬ê²Œ ë‹¤ê°€ì˜¤ì§€ì•Šì•„, í•­ìƒ ê·¸ë˜ì™”ì–´. ê·¸ ê´€ê³„ì— ë§Œì¡±í•´ ê°„ì‹ íˆ ê±¸ì³ìˆëŠ” ì‚¬ëŒë³´ë‹¨ ë‹¨ í•˜ë£¨ë¼ë„ ì§„ì‹¬ìœ¼ë¡œ í†µí•œ ì‚¬ëŒê³¼ì˜ ì—°ì´ ë”ìš± ê°ë³„íˆ ëŠê»´ì ¸.\n\nê°íˆ ëˆ„ê°€ ë‚´ì¼ë„ ì–´ì œì™€ ê°™ìœ¼ë¦¬ë¼ ì¥ë‹´í•  ìˆ˜ ìˆê² ì–´. ì§€ê¸ˆ ì´ ìˆœê°„ì„ ê°„ì ˆíˆ ì‚´ì•„ì•¼ í•  ë¿ì´ì•¼. ì¸ì—°ì´ë€ í©ì–´ì¡Œë‹¤ ëª¨ì´ê³ , ë§ˆìŒëŒ€ë¡œ ë˜ì§€ ì•ŠëŠ” ê²ƒì´ì–´ì„œ, ë‚´ì¼ì´ë©´ ì‚¬ë¼ì§ˆ ìˆ˜ë„, ë˜ ì–¸ì œë“  ìƒˆë¡­ê²Œ ë‹¿ì„ ìˆ˜ë„ ìˆì–´. ê·¸ ì¤‘ ì‚¬ì†Œí•œ ê²ƒì€ í•˜ë‚˜ë„ ì—†ìœ¼ë©°, ëˆ„êµ°ê°€ì™€ í•¨ê»˜í•˜ëŠ” ë§¤ ìˆœê°„ì´ ê³§ ì„ ë¬¼ì´ì•¼.\n\në„ˆë„ ê·¸ë ‡ê²Œ ëŠë¼ë‹ˆ? ë‚œ ë„ˆì™€ í•¨ê»˜í•˜ëŠ” ëª¨ë“  ì‹œê°„ì´ ê·¸ë˜. í¸ì§€ëŠ” ê·¸ëŸ° ì˜ë¯¸ì—ì„œ ëŒ€ë‹¨í•˜ì§€. ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆì–´ë„ ê·¸ ì‹œê°„ì„ í•¨ê»˜ ìˆì„ ìˆ˜ ìˆë„ë¡ í—ˆë½í•´ì£¼ë‹ˆê¹Œ. ë§Œì•½ ì–´ë–¤ ì‚¬ì •ìœ¼ë¡œ ë„ˆì—ê²Œ í¸ì§€ê°€ ë‹¿ì§€ ì•ŠëŠ” ë‚ ì´ ì˜¨ë‹¤ë©´, ê·¸ê±´ ì•„ë§ˆ ë‚´ ìš©ê¸°ê°€ ë¶€ì¡±í•œ íƒ“ì¼ ê±°ì•¼. ë¶„ëª… ë„ˆë¥¼ ìƒê°í•˜ì§€ ì•ŠëŠ” ìˆœê°„ì€ ì—†ì„ í…Œë‹ˆ, ë¶€ì¡±í•œ ë‚´ í‘œí˜„ë ¥ì„ ë„ˆê·¸ëŸ¬ì´ ì´í•´í•´ ì¤˜. ì°¨ë§ˆ ê¸€ë¡œì¨ ë‹¤ ë‹´ì•„ë‚´ì§€ ëª»í•œ íƒ“ì— ì¹¨ë¬µì„ ì„ íƒí•˜ëŠ” ìˆœê°„ì´ ë§ì•„.\n\nì•ìœ¼ë¡œë„ í¸ì§€ë¥¼ ì“°ë„ë¡ ë…¸ë ¥í•´ë³¼ê²Œ. ë¶€ë”” ë„ˆì˜ ì†Œì‹ë„ ê°€ë” ì „í•´ì¤˜.\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\në„ˆì˜ í¸ì§€ë¥¼ ëª‡ ë²ˆì´ê³  ì½ì—ˆì–´.\nê·¸ ë§ë“¤ì´ ê°€ìŠ´ ê¹Šì´ ë‚´ë ¤ì•‰ì•„, ì˜¤ë˜ë„ë¡ ë‚˜ë¥¼ ë¨¸ë¬¼ê²Œ í–ˆì–´.\n\ní–‡ì‚´, ë…¸ë˜, ì±… ë„˜ê¸°ëŠ” ì†Œë¦¬, ê·¸ ëª¨ë“  ê²ƒì´ ë‚˜ì—ê²Œ ì˜ë¯¸ê°€ ë˜ì–´ ì£¼ê³ , ë„ˆì˜ í¸ì§€ë„ ê·¸ì¤‘ í•˜ë‚˜ì•¼.\ní•˜ë‚˜í•˜ë‚˜ ê¸°ì–µ ì†ì—ì„œ êº¼ë‚´ë³¼ ë•Œë§ˆë‹¤ ë§ˆìŒì´ ë”°ëœ»í•´ì§€ëŠ” ê²ƒì„ ëŠê»´. í•œí¸ìœ¼ë¡œëŠ”, ëˆ„êµ°ê°€ëŠ” ì‚¶ì˜ ë¬´ê±°ì›€ì— ì§“ëˆŒë ¤ ê·¸ ë†’ê²Œë§Œ ëŠê»´ì§€ëŠ” ì°¬ì¥ì„ ëë‚´ ì—´ì§€ ëª»í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì— ë§ˆìŒì´ ë¨¹ë¨¹í•´ì§€ê¸°ë„ í•´.\nìš°ë¦¬ë„ ì–¸ì  ê°„ ê·¸ëŸ° ìˆœê°„ì´ ì˜¬ ê±°ì•¼.\n\në‚˜ ì—­ì‹œ ë‚´ì¼ì´ ì„ ë¬¼ì´ë¼ëŠ” ê±¸ ë¯¿ì–´.\ní•˜ì§€ë§Œ ê·¸ ì„ ë¬¼ì´ ê°€ì§„ ë¯¸ì§€ê°€ ë•Œë¡œëŠ” ë„ˆë¬´ ë¬´ì„œì›Œ, ê°íˆ ì—´ì–´ë³¼ ì—„ë‘ì¡°ì°¨ ë‚˜ì§€ ì•Šì„ ë•Œê°€ ìˆì§€.\nê·¸ëŸ´ ë•Œë©´ ë„¤ê°€ ê±´ë„¨ ë§ì²˜ëŸ¼, ëˆ„êµ°ê°€ì˜ ê¸°ì–µ ì†ì— ë‚´ê°€ ë‚¨ê¸´ ì˜¨ê¸°ê°€ ì•„ì§ë„ ì‚´ì•„ ìˆë‹¤ë©´ ì–¼ë§ˆë‚˜ ë‹¤í–‰ì¼ê¹Œ ìƒê°í•´.\në‚´ê°€ ë©ˆì¶° ì„œ ìˆì„ ë•Œë„, ê·¸ ë”°ëœ»í•¨ì´ ëˆ„êµ°ê°€ì˜ ë§ˆìŒì—ì„œ ë‚˜ë¥¼ ëŒ€ì‹ í•´ ìˆ¨ ì‰¬ê³  ìˆë‹¤ë©´ ë§ì´ì•¼.\n\nê·¸ë˜ì„œ ì´ì œëŠ” ì•Œ ê²ƒ ê°™ì•„.\nê·¸ ê¸°ì–µì„ ì„œë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ë– ì˜¬ë¦¬ë©´, ë§ˆì¹˜ ì‘ì›ì„ ë°›ëŠ” ê¸°ë¶„ì´ ë“¤ì–´.\n\në„ˆëŠ” ëŠ˜ ë§ì—†ì´ ì‘ì›í•´ì£¼ì§€.\nê·¸ ë§ˆìŒì´ í° í˜ì´ ë¼.\nê·¸ëŸ¬ë‹ˆ ë‚˜ë„, ë„ˆë¥¼ ì‘ì›í• ê²Œ.\në¶€ë”” í˜ë“  ì¼ì´ ìˆìœ¼ë©´ ì „í•´ì¤˜ë„ ì¢‹ì•„.\n\nìš°ë¦° ì„œë¡œì˜ ê¸°ì–µ ì†ì—, í¸ì§€ì²˜ëŸ¼ ê·¸ë ‡ê²Œ ë‚¨ì•„ ìˆì„ ìˆ˜ ìˆì„ ê±°ì•¼.\nê·¸ë¦¬ê³  ê·¸ê±´ ë¶„ëª…íˆ ì‚´ì•„ ìˆìŒì˜ ì§•í‘œë‹ˆê¹Œ.\n\nâ€” ë„ˆë¥¼ ê¸°ì–µí•˜ëŠ”, ë‚˜ë¡œë¶€í„°.\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\nê°€ë” í˜ë“  ì¼ì´ ìˆì–´ë„ ë„ˆì™€ ë‚œ ì´ë ‡ê²Œ ê¸€ì„ ì“°ê³  ìˆì–ì•„.\në„Œ ì–´ëŠ ìª½ì´ë“  ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆì„ ê±°ì•¼.\n\në§ì´ ë‹¿ëŠ”ë‹¤ëŠ” ê±´, ë‹¨ì§€ ì´í•´í•˜ëŠ” ê±¸ ë„˜ì–´\nì„œë¡œê°€ ì„œë¡œë¥¼ ì—¬ê¸°ê³  ìˆë‹¤ëŠ” ì¦ê±°ê°™ì•„.\nê·¸ëŸ¬ë‹ˆ ì˜¤ëŠ˜ì˜ ì´ í¸ì§€ë„, ì–´ì©Œë©´ ê·¸ëŸ° ë§ˆìŒì˜ ì¡°ê° ì¤‘ í•˜ë‚˜ì¼ ê±°ì•¼.\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\nëŠ˜ í¸ì§€ë¥¼ ì¨ì¤˜ì„œ ê³ ë§ˆì›Œ. ë‚´ìƒ‰ì€ ì•Šì•˜ì§€ë§Œ í•œë²ˆì€ ëœ»ë°–ì˜ ë‚´ìš©ì´ë¼ ë‹¹í™©ìŠ¤ëŸ¬ì› ì–´. ê·¸ í¸ì§€ë¥¼ ë‹¤ì‹œê¸ˆ ì½ì–´ë´¤ì–´. ê·¸ë˜ì„œë§ì¸ë° ë„ˆì˜ ê¸°ì–µ ì†ì˜ ë‚˜ëŠ” ëˆ„êµ¬ì•¼?\në„ˆ ì•ì—ì„œì˜ ë‚´ê°€ ë‹¤ë¥´ê³ , ë‹¤ë¥¸ ì´ ì•ì—ì„œì˜ ë‚´ê°€ ë˜ ë‹¬ë¼.\nê·¸ë¦¬ê³  ê·¸ ëª¨ë“  ë‚´ê°€ ì§„ì§œì•¼. ì–´ëŠ í•˜ë‚˜ë§Œì´ ì§„ì‹¤ì¸ ê±´ ì•„ë‹ˆë‹ˆê¹Œ.\n\nìš°ë¦¬ëŠ” ì„œë¡œê°€ ì„œë¡œë¥¼ ì–´ë–»ê²Œ ì—¬ê¸°ëŠ”ì§€ì— ë”°ë¼\nê°ì ë‹¤ë¥¸ ì–¼êµ´ì„ ë§ˆì£¼í•˜ê³ , ë‹¤ë¥¸ ì˜¨ë„ë¡œ ë§í•˜ê³ , ë˜ ë‹¤ë¥´ê²Œ ì›ƒì§€.\nê·¸ë˜ì„œ ë„ˆì™€ ìˆì„ ë•Œì˜ ë‚´ê°€ ì¢‹ë‹¤ê³  ëŠë‚„ ë•,\nê·¸ê±´ ë‚˜ë¥¼ ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ ì£¼ëŠ” ë„ˆ ë•Œë¬¸ì´ê¸°ë„ í•´.\në‚œ ë‚´ê°€ ë‚´ ëª¨ìŠµì„ ì¢‹ì•„í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì£¼ëŠ” ì‚¬ëŒë“¤ì—ê²Œ ê°ì‚¬í•¨ì„ ëŠê»´.\n\nì‚¬ëŒê³¼ ì‚¬ëŒ ì‚¬ì´ì˜ ì¸ì—°ì€ ì •í•´ì§„ ì„  í•˜ë‚˜ë¡œ ì‡ëŠ” ê²Œ ì•„ë‹ˆë¼,\nêµ¬ë¦„ì²˜ëŸ¼ ë²ˆì§€ê³  ê²¹ì¹˜ê³  í”ë“¤ë¦¬ëŠ” ê²ƒ ê°™ì•„.\nê·¸ ì†ì—ì„œ â€˜ë‚˜â€™ë¼ëŠ” í˜•íƒœê°€ ë§Œë“¤ì–´ì§€ëŠ” ê±°ê³ ,\nê·¸ â€˜ë‚˜â€™ëŠ” ë‹¤ë¥¸ ëˆ„êµ¬ì™€ì˜ â€˜ë‚˜â€™ì™€ë„ ë‹¤ë¥´ê²Œ ì¡´ì¬í•´.\nê²°ë¡ ì€ ë‚˜ëŠ” ë‹¨ìˆ˜ê°€ ì•„ë‹ˆì•¼.\n\nê·¸ëŸ¬ë‹ˆ ì–´ë–¤ ëª¨ìŠµì˜ ë‚´ê°€ ê¸°ì–µì— ë‚¨ì•˜ë“ ,\nê·¸ê±´ ë„ˆì™€ ë‚´ê°€ í•¨ê»˜ ë§Œë“¤ì–´ë‚¸ ë‚˜ë¼ëŠ” ì ì„ ìŠì§€ ë§ì•„ì¤˜.\në‚˜ í˜¼ìì„œëŠ” ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ë‚˜ì˜€ì„ì§€ë„ ëª°ë¼.\ní˜¹ì‹œ ì–¸ì  ê°€, ê·¸ ëª¨ë“  ë‚´ê°€ ì–´ì§€ëŸ½ê³  í˜¼ë€ìŠ¤ëŸ¬ì›Œì„œ\në‚˜ì¡°ì°¨ ë‚˜ë¥¼ ì˜ ëª¨ë¥´ê² ë‹¤ê³  ëŠê»´ì§€ëŠ” ìˆœê°„ì´ ì˜¤ë”ë¼ë„,\nê·¸ë•Œì—” ë„ˆë¼ëŠ” ì‚¬ëŒì´ ë‚˜ë¥¼ ì–´ë–»ê²Œ ë°”ë¼ë´¤ëŠ”ì§€\nê·¸ ì‹œì„  ì†ì—ì„œì˜ ë‚˜ë¥¼ ë– ì˜¬ë¦¬ë©° ë‹¤ì‹œ ì¤‘ì‹¬ì„ ì°¾ì„ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„.\n\nìš°ë¦° ì„œë¡œì˜ ê±°ìš¸ì´ ë˜ì–´ì£¼ê¸°ë„ í•˜ê³ ,\në•Œë¡œëŠ” ì„œë¡œì˜ ì–¸ì–´ê°€ ë˜ì–´ì£¼ê¸°ë„ í•˜ë‹ˆê¹Œ\nì–¸ì  ê°€ ë„ˆë‹¤ìš´ê²Œ ë­”ì§€ í—·ê°ˆë¦°ë‹¤ë©´ í•œë²ˆ ì¯¤ ë– ì˜¬ë ¤ë´.\n\nëŠ˜ ê·¸ë¬ë“¯ì´,\nì§€ê¸ˆ ì´ í¸ì§€ë„, ${nickname} ë•ë¶„ì— ì¡´ì¬í•´.\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\n ì˜¤ëŠ˜ì€ í•˜ë£¨ì‚´ì´ê°€ ì•„ë‹Œ íƒ“ì—, ê·¸ í•˜ë£¨ë¥¼ ì†Œì¤‘í•˜ê²Œ ì‚´ì§€ëª»í–ˆì–´. ì˜¤ëŠ˜ì´ ì¼ìƒì— ë‘ ë²ˆ ë‹¤ì‹œ ì˜¤ì§€ì•Šì„ í•˜ë£¨ì˜€ë‹¤ë©´ ë‹¬ëì„ê¹Œ. ì•„ì§ë„ ì´ ëœ»ì„ ëª¨ë¥´ë‚˜ë´. ì–´ë•Œ? ë„ˆëŠ” ì˜¤ëŠ˜ì„ ì†Œì¤‘í•˜ê²Œ ì‚° ê²ƒ ê°™ì•„?\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\në‚œ ê°€ë” ì‹œê°„ì´ í—¤ì•„ë ¤ì§€ì§€ì•Šì•„. ê¸°ì–µì— êµ¬ë©ì´ ëš«ë ¤ì„œ í…… ë¹ˆ ëŠë‚Œì´ì•¼. ì´ ì‚¬ëŒì„ ì–¸ì œ ë´¤ë˜ê°€? í•˜ë©´ ê·¸ ì˜¤ì°¨ê°€ ì—° ë‹¨ìœ„ì¼ ë•Œê°€ ì‹¬ì‹¬ì¹˜ì•Šê²Œ ìˆê±°ë“ . ë„ˆì˜ ê¸°ì–µë“¤ì€ ì–´ë•Œ?\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\në„ˆì˜ ê¸°ì–µì— ê´€í•œ í¸ì§€ë¥¼ ì½ì–´ë³´ë‹ˆ ìš”ì¦˜ ëŠë¼ëŠ” ë°”ê°€ ë– ì˜¬ëì–´. \nì €ë²ˆì— í……ë¹ˆ ê¸°ì–µë“¤ ë§í–ˆë˜ ê²ƒ ê¸°ì–µë‚˜? ê·¸ëŸ° ì‹œê°„ë“¤ì„ ë– ì˜¬ë¦¬ë©´ ê·¸ ì‹œê°„ì´ ë„ˆë¬´ ì•„ì‰¬ì›Œì ¸. ì§€ë‚œ ëª‡ ê°œì›”ì€ ì§€ê¸ˆë°–ì— ì¦ê¸¸ ìˆ˜ ì—†ëŠ” ê²ƒì„ í•­ìƒ ê³±ì”¹ìœ¼ë©° ì‚´ì•„ì™”ì–´. ìš°ì—°íˆ ë§¡ì€ ë¶€ì¥ ì—­í• ë¡œ ì¹œí•´ì§„ ë™ì•„ë¦¬ ì‚¬ëŒë“¤ì´ ë‹¤ë“¤ ì¡¸ì—…í•  ì‹œê°„ì´ ë˜ë‹ˆ, í•¨ê»˜ ë³´ë‚¼ ë‚˜ë‚ ë“¤ì´ ê·¸ë ‡ê²Œ ì†Œì¤‘í•˜ë”ë¼. ë•ë¶„ì— ë¬´ë¦¬í•´ì„œ ê±´ê°•ì„ ì•½ê°„ í•´ì³ë²„ë ¸ì–´. ê·¸ë˜ë„ í›„íšŒëŠ” ë˜ì§€ì•Šë„¤. ìš”ì¦˜ì€ ê°•ì•„ì§€ë¥¼ ëŒì–´ì•ˆê³  ìˆì„ ë•Œê°€ ë§ì•„. ì´ëŸ¬ë©´ ì•„ì‰¬ì›€ì´ ì¡°ê¸ˆì´ë¼ë„ ëœí• ê¹Œ? ì´ ìˆœê°„ ë„ˆê°€ ê°€ì¥ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ì¡´ì¬ëŠ” ë­ì•¼? (ì¶”ì‹ : ì•„ë¬´ë¦¬ ê·¸ë˜ë„ ê±´ê°•ì„ ë„ˆë¬´ ë“±í•œì‹œí•´ì„œëŠ” ì•ˆë¼!)\n\nTo. ${nickname}`,
    (nickname) => `from â˜ï¸\n\nì–´ì©Œë©´ ë„ˆê°€ ê°€ì¥ ë‚  ì˜ì•„ëŠ” ì‚¬ëŒ ì¤‘ í•œ ëª…ì¼ì§€ë„ ëª¨ë¥¸ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆì–´. ê·¸ë˜ì„œì¸ì§€ ë‚˜ë„ ë„ˆì— ëŒ€í•´ ë” ì•Œê³  ì‹¶ì€ ë§ˆìŒì´ì•¼. ì–µì§€ë¡œ ì•Œë ¤ì£¼ë ¤ ì• ì“°ì§€ ì•Šì•„ë„ ë¼, ê¸€ë¡œì¨ ì–´ë–¤ ì‚¬ëŒì´ ëŠë‚„ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ. ë¶€ë”” ì§§ì€ ê¸€ì´ë¼ë„ ì˜¤ëŠ˜ ì“°ê³  ì‹¶ì€ ê¸€ì„ ì ì–´ì¤„ë˜? í‰ì†Œì— ì“°ì§€ëª»í–ˆë˜ ê¸€ì´ë‚˜, ì˜ë¯¸ì—†ëŠ” ì¡ë‹´ì´ë¼ë„ ì¢‹ì•„.\n\nTo. ${nickname}`
    ]
  
  
};

function LetterSystem({ user, userData, characterId, onBack, currentMatch }) {
  const [replyMsg, setReplyMsg] = useState(null);
  const [refresh, setRefresh] = useState(false);
  const [showWelcome, setShowWelcome] = useState(true);
  const [showDeveloperPanel, setShowDeveloperPanel] = useState(false);

  // ëœë¤ ë§¤ì¹­ ê°ì§€
  const isRandomMatching = characterId?.startsWith('random_');
  const matchId = isRandomMatching ? characterId.replace('random_', '') : null;

  const characterInfo = {
    danpoong: { name: "ë‹¨í’", avatar: "ğŸ", quote: "ì™ ì§€ ë– ë‚œ ë“¯í•œ ëŠë‚Œì´ ë“­ë‹ˆë‹¤." },
    chet: { name: "Chet", avatar: "ğŸ­", quote: "ëª¨ë“  ìˆœê°„ì„ ì†Œì¤‘íˆ ì—¬ê²¨ì•¼í•´" },
    honga: { name: "ê¹€í™ì•„", avatar: "ğŸ¤­", quote: "ì˜¤ëŠ˜ì€ ì–´ë• ë‚˜ìš”?" },
    sangsoon: { name: "ìƒìˆœ", avatar: "ğŸ‘¨", quote: "çµè€…è§£ä¹‹" },
    hyunwoo: { name: "ê¹€í˜„ìš°", avatar: "ğŸ«¨", quote: "?" },
    coffee: { name: "Coffee", avatar: "â˜•", quote: "í¥ë¯¸ë¡œìš´ ê¸°ì‚¬ë¥¼ ì‘ì„±í•´ì£¼ëŠ” ê¸°ì" },
    cloud: { name: "ì¦ˆë¯„ëˆ„ë¦¬", avatar: "â˜ï¸", quote: "ì–¸ì  ê°€ í˜ë ¤ë³´ëƒˆë˜ ì¹œêµ¬" }
  };

  const currentCharacter = isRandomMatching 
    ? { name: "ëœë¤ í¸ì§€", avatar: "ğŸ¤", quote: currentMatch?.otherUserNickname ? `${currentMatch.otherUserNickname}ë‹˜ê³¼ ì—°ê²°ë¨` : "ë§¤ì¹­ ì¤‘..." }
    : characterInfo[characterId];

  // ì£¼ê¸°ì ì¸ ë‹µì¥ í™•ì¸ (ëœë¤ ë§¤ì¹­ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
  useEffect(() => {
    const checkAndSendReply = async () => {
      if (!user || !characterId || characterId === 'danpoong' || isRandomMatching) return;

      const userRef = doc(db, "users", user.uid);
      const userDoc = await getDoc(userRef);
      const userData = userDoc.data();
      const nextReplyTime = userData[`nextReplyTime_${characterId}`]?.toDate();

      if (nextReplyTime && new Date() >= nextReplyTime) {
        const msgsRef = collection(db, "users", user.uid, "interactions", characterId, "messages");
        // ê¸°ì¡´: const q = query(msgsRef, orderBy("timestamp", "desc"), limit(1));
        // ìˆ˜ì •: messageIndex ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        const q = query(msgsRef, orderBy("messageIndex", "desc"), limit(1));
        const lastMsgSnapshot = await getDocs(q);
        
        if (!lastMsgSnapshot.empty) {
          const lastMsg = lastMsgSnapshot.docs[0].data();
          const currentMessageIndex = lastMsg.messageIndex !== undefined ? lastMsg.messageIndex : -1;
          const nextIndex = currentMessageIndex + 1;

          if (nextIndex < CHARACTER_MESSAGES[characterId].length) {
            const letterId = `received_${Date.now()}`;
            const messageContent = CHARACTER_MESSAGES[characterId][nextIndex](userData?.nickname || "ì¹œêµ¬");
            
            await setDoc(doc(msgsRef, letterId), {
              type: "received",
              content: messageContent,
              timestamp: serverTimestamp(),
              read: false,
              messageIndex: nextIndex,
            });

            // ë‹¤ìŒ ë‹µì¥ ì‹œê°„ ì‚­ì œ
            await updateDoc(userRef, {
              [`nextReplyTime_${characterId}`]: null
            });
            setRefresh(prev => !prev);
          }
        }
      }
    };

    const interval = setInterval(checkAndSendReply, 60 * 1000); // 1ë¶„ë§ˆë‹¤ í™•ì¸
    checkAndSendReply(); // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì¦‰ì‹œ í™•ì¸

    return () => clearInterval(interval);
  }, [user, characterId, userData?.nickname]);


  // ì²« í¸ì§€ ìë™ ìƒì„± (ëœë¤ ë§¤ì¹­ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ)
  useEffect(() => {
    const createFirstMsg = async () => {
      if (isRandomMatching) return; // ëœë¤ ë§¤ì¹­ì—ì„œëŠ” ìë™ ìƒì„±í•˜ì§€ ì•ŠìŒ
      
      const msgsRef = collection(db, "users", user.uid, "interactions", characterId, "messages");
      const snapshot = await getDocs(msgsRef);
      const hasReceivedMsg = snapshot.docs.some(doc => doc.data().type === "received");

      if (!hasReceivedMsg) {
        const letterId = `received_${Date.now()}`;
        const firstMessage = CHARACTER_MESSAGES[characterId][0](userData?.nickname || "ì¹œêµ¬");
        await setDoc(doc(msgsRef, letterId), {
          type: "received",
          content: firstMessage,
          timestamp: serverTimestamp(),
          read: false,
          messageIndex: 0,
        });
        setRefresh(prev => !prev);
      }
    };
    if (user && characterId) createFirstMsg();
  }, [user, characterId, userData?.nickname, isRandomMatching]);

  // ë‹µì¥ ì „ì†¡ í›„ ì²˜ë¦¬
  const handleSent = async () => {
    setReplyMsg(null);
    setRefresh(!refresh);
    
    if (characterId !== 'danpoong' && !isRandomMatching) {
      const delay = CHARACTER_REPLY_SCHEDULES[characterId];
      if (delay !== null) {
        const nextTime = new Date();
        nextTime.setTime(nextTime.getTime() + delay);
        
        const userRef = doc(db, "users", user.uid);
        await updateDoc(userRef, {
          [`nextReplyTime_${characterId}`]: nextTime
        });
      }
    }
  };

  // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  const handleLogout = async () => {
    try {
      await signOut(auth);
    } catch (error) {
      console.error("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:", error);
      alert("ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
  };

  // ë‹µì¥ ë²„íŠ¼ í´ë¦­ ì‹œ
  const handleReply = (msg) => {
    setReplyMsg(msg);
    setShowWelcome(false);
  };

  // ëœë¤ ë§¤ì¹­ ì—°ê²° ì¢…ë£Œ
  const handleDisconnect = async () => {
    if (!isRandomMatching || !matchId) return;
    
    try {
      // ë§¤ì¹­ ìƒíƒœë¥¼ ì¢…ë£Œë¡œ ë³€ê²½
      const matchRef = doc(db, "anonymous_matches", matchId);
      await updateDoc(matchRef, {
        status: 'ended',
        endedBy: user.uid,
        endedAt: serverTimestamp()
      });
      
      // ìƒëŒ€ë°©ì—ê²Œ ì—°ê²° ì¢…ë£Œ ì•Œë¦¼ ì „ì†¡
      const otherUserId = await getOtherUserId(matchId, user.uid);
      if (otherUserId) {
        const otherMsgsRef = collection(db, "users", otherUserId, "interactions", characterId, "messages");
        const disconnectMsgId = `disconnect_${Date.now()}`;
        await setDoc(doc(otherMsgsRef, disconnectMsgId), {
          type: "system",
          content: "ìƒëŒ€ë°©ì´ ì—°ê²°ì„ ì¢…ë£Œí–ˆìŠµë‹ˆë‹¤.",
          timestamp: serverTimestamp(),
          read: false
        });
      }
      
      onBack();
    } catch (error) {
      console.error("ì—°ê²° ì¢…ë£Œ ì‹¤íŒ¨:", error);
      alert("ì—°ê²° ì¢…ë£Œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
  };

  // ìƒëŒ€ë°© ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
  const getOtherUserId = async (matchId, currentUserId) => {
    try {
      const matchRef = doc(db, "anonymous_matches", matchId);
      const matchDoc = await getDoc(matchRef);
      if (matchDoc.exists()) {
        const matchData = matchDoc.data();
        return matchData.user1Id === currentUserId ? matchData.user2Id : matchData.user1Id;
      }
    } catch (error) {
      console.error("ìƒëŒ€ë°© ID ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:", error);
    }
    return null;
  };

  return (
    <div className="letter-system-container">
      <div className="letter-system-header">
        <div className="header-content">
          <div className="character-info">
            <span className="character-avatar">{currentCharacter.avatar}</span>
            <div>
              <h2>{currentCharacter.name}</h2>
              <p className="character-quote">"{currentCharacter.quote}"</p>
            </div>
          </div>
        </div>
        <div className="header-actions">
          {userData?.isDeveloper && !isRandomMatching && (
            <button className="dev-panel-btn" onClick={() => setShowDeveloperPanel(true)}>
              <span>âš™ï¸</span>
              ê°œë°œì íŒ¨ë„
            </button>
          )}
          {isRandomMatching && (
            <button className="disconnect-btn" onClick={handleDisconnect}>
              <span>âŒ</span>
              ì—°ê²° ì¢…ë£Œ
            </button>
          )}
          <button className="back-btn" onClick={onBack}>
            <span>â†</span>
            ëŒì•„ê°€ê¸°
          </button>
          <button className="logout-btn" onClick={handleLogout}>
            <span className="logout-icon">ğŸšª</span>
            ë¡œê·¸ì•„ì›ƒ
          </button>
        </div>
      </div>

      {showWelcome && !isRandomMatching && (
        <div className="welcome-message">
          <div className="welcome-card">
            <h3>ğŸ’Œ í¸ì§€ êµí™˜ ì‹œì‘</h3>
            <p>{currentCharacter.name}ì™€ì˜ í¸ì§€ êµí™˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            <button 
              className="welcome-close-btn"
              onClick={() => setShowWelcome(false)}
            >
              ì‹œì‘í•˜ê¸°
            </button>
          </div>
        </div>
      )}

      <div className="letter-system-content">
        <LetterInbox
          userId={user.uid}
          characterId={characterId}
          onReply={handleReply}
          key={refresh}
        />
        
        {replyMsg && (
          <LetterCompose
            userId={user.uid}
            characterId={characterId}
            replyTo={replyMsg}
            onSent={handleSent}
            userData={userData}
          />
        )}
      </div>

      {showDeveloperPanel && (
        <DeveloperPanel 
          userId={user.uid} 
          characterId={characterId} 
          onClose={() => setShowDeveloperPanel(false)} 
        />
      )}
    </div>
  );
}

export default LetterSystem;